<div class="container my-5">
  <h2>ユーザー詳細</h2>
  <div class="card mb-4">
    <div class="card-body">
      <p><strong>名前:</strong> <%= @user.last_name %> <%= @user.first_name %></p>

      <% if @user == current_user %>
        <%= link_to "プロフィール編集", edit_public_user_path(@user) %> |
        <%= link_to "退会する", public_user_path(@user), method: :delete,
                             "dateconfirm" => "本当に退会しますか？" %>
      <% end %>
    </div>
  </div>

  <h3><%= @user.last_name %> <%= @user.first_name %> さんの投稿一覧</h3>
  <% if @posts.any? %>
    <div class="row">
      <% @posts.each do |post| %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <% if post.images.attached? %>
              <%= image_tag post.images.first.variant(resize: "400x300"), class: "card-img-top" %>
            <% else %>
              <%= image_tag "no_image.jpg", class: "card-img-top" %>
            <% end %>
            <div class="card-body">
              <h5 class="card-title"><%= link_to post.title, public_post_path(post) %></h5>
              <p class="card-text"><%= truncate(post.body, length: 50) %></p>
            </div>
            <div class="card-footer text-muted">
              投稿日: <%= l(post.created_at, format: :short) %>
              コメント: <%= post.comments.count %> 件
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="d-flex justify-content-center mt-4">
      <%= paginate @posts %>
    </div>

  <% else %>
    <p class="text-muted">投稿はまだありません。</p>
  <% end %>
</div>
